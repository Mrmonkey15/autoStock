<%- include("../partials/header")%>
<%- include("../partials/sidebar")%>

<main class="bg-secondary-subtle w-100 d-flex flex-column justify-content-center align-items-center">
    <div class="d-flex flex-column  align-items-center card p-4  rounded-4 bg-body-tertiary
    " >
        <h2 class="text-danger fw-bold fs-3" >Cadastro de Novo Veículo</h2>
        <form action="" class="container card-body">
            <label for="plate" class="form-label" >Placa</label>
            <input type="text" maxlength="7" class="form-control mb-3" required  oninput="removeSpaces(this)">
        
            <!-- gerado dinamico -->
            <label for="" class="form-label">Marca</label>
        
            <select class="form-select mb-3" name="brand" required>
                <option class="bg-dark-subtle">Escolha uma marca</option>
                <% brands.forEach((brand) => { %>
                    <option class="bg-dark-subtle" value="<%= brand.name %>"><%= brand.name %></option>
                <% }); %>
            </select>    
        
            <label class="form-label">Modelo</label>
            <input type="text" class="form-control mb-3" name="model" required> 
        
            <label class="form-label">Categoria</label>
            <select name="category" class="form-select" required>
                <option class="bg-dark-subtle">Escolha uma categoria</option>
                <option value="sedan" class="bg-dark-subtle">Sedan</option>
                <option value="SUV" class="bg-dark-subtle">SUV</option>
                <option value="hatchback" class="bg-dark-subtle">Hatchback</option>
                <option value="utilitario" class="bg-dark-subtle">Utilitário</option>
                <option value="conversivel" class="bg-dark-subtle">Conversível</option>
                <option value="picape" class="bg-dark-subtle">Picape</option>
                <option value="van" class="bg-dark-subtle">Van</option>
                <option value="eletrico" class="bg-dark-subtle">Elétrico</option>
            </select>
        
            <div class="d-flex mt-3 mb-3 align">
                <div class="d-flex gap-2 align-items-center">
                    <label class="form-label">Ano:</label>
                    <input type="number" class="form-control w-50" name="year" step="1" maxlength="4" required>
                </div>
                <div class="d-flex gap-2 align-items-center">
                    <label class="form-label">Km: </label>
                    <input type="number" class="form-control w-50" name="kilometers" required>  
                </div>
            </div>
        
            <label class="form-label">Valor de Aquisição</label>
            <input type="text" class="form-control mb-3 text-danger" placeholder="R$ 10.000,00" name="purchasePrice" id="purchasePrice" oninput="formatCurrency(this)" required>
        
            <label class="form-label">Valor Médio de Mercado (opcional) </label>
            <input type="text" class="form-control mb-3" placeholder="R$ 10.000,00" name="marketPrice" id="marketPrice" oninput="formatCurrency(this)">
        
            <div class="d-flex flex-column align-items-center justify-content-center gap-4">
                <input type="submit" value="Cadastrar" class="btn btn-lg btn-danger m-auto">
                <p class="mt-2">
                    <a href="#" class="link-danger link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">
                        <i class="fa-solid fa-list"></i> Ver Lista de veículos
                    </a>
                </p>
            </div>
        </form>
        
 
     
      
    </div>
</main>

<script>
    function formatCurrency(input) {
        let value = input.value.replace(/\D/g, ''); // Remove caracteres não numéricos
        value = (value / 100).toFixed(2); // Converte para formato de moeda
        value = value.replace('.', ','); // Substitui o ponto por vírgula
        value = value.replace(/(\d)(?=(\d{3})+(\,|$))/g, '$1.'); // Adiciona ponto como separador de milhar
        input.value = `R$ ${value}`; // Define o valor no campo com o prefixo 'R$'
    }
    function removeSpaces(input) {
        input.value = input.value.replace(/\s+/g, '').toUpperCase(); // Remove todos os espaços
    }
</script>



<%- include("../partials/footer")%>